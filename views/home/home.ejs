<!DOCTYPE html>
<html lang="es">

<%- include("../partials/head") %>

<body>

<%- include("../partials/navbar") %>

<div class="container mt-4">

    <div class="row">

        <!-- Carrusel de miniaturas -->
        <div class="col-md-2 miniaturas">
            <% juegosCarrusel.forEach((juego, index) => { %>
                <img src="<%= juego.imagen %>"
                     class="thumb <%= index === 0 ? 'active' : '' %>"
                     data-nombre="<%= juego.nombre %>"
                     data-precio="<%= juego.precio %>"
                     data-id="<%= juego.id %>"
                     onclick="cambiarImagen(this)">
            <% }) %>
        </div>

        <!-- Imagen principal-->
        <div class="col-md-10 position-relative">
            <img id="imagenPrincipal" src="<%= juegosCarrusel[0].imagen %>" class="banner">
            <div id="overlayInfo" class="position-absolute bottom-0 start-0.5 text-white">
                <h5 id="nombreJuego"><%= juegosCarrusel[0].nombre %></h5>
                <p id="precioJuego"><%= juegosCarrusel[0].precio %> COP</p>
                <a id="btnComprar" href="/comprar/<%= juegosCarrusel[0].id %>" class="btn-comprar-overlay">COMPRAR</a>
            </div>
        </div>
    </div>

    <!-- RECOMENDACIONES -->
    <h4 class="mt-5">Recomendaciones></h4>
    <div class="row mt-3">
        <% juegosRecomendaciones.forEach(juego => { %>
            <div class="col-md-3 mb-3">
                <div class="card game-card">
                    <img src="<%= juego.imagen %>" class="card-img-top">
                    <div class="card-body">
                        <h6><%= juego.nombre %></h6>
                        <p><%= juego.precio %> COP</p>
                        <a href="/comprar/<%= juego.id %>"
                           class="btn btn-primary btn-sm">Comprar</a>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
    <h4 class="mt-5">Explora por categorias></h4>
</div>

<div class="row mt-3">
    <% categorias.forEach(cat => { %>
        <div class="col-md-3 mb-3">
            <div class="categoria-card">
                <img src="<%= cat.imagen %>" alt="<%= cat.nombre %>">
                <a href="/categoria/<%= cat.id %>" class="categoria-btn">
                    <%= cat.nombre %>
                </a>
            </div>
        </div>
    <% }) %>
</div>

<div class="container mt-5">

    <div class="login-box text-center">

        <h4>¿Buscando recomendaciones?</h4>

        <p>Inicia sesión para ver recomendaciones personalizadas</p>

        <a href="/login" class="btn btn-login">Iniciar sesión</a>
        <p class="mt-3">
            O <a href="/register" class="registro-link">regístrate</a> para unirte a nuestra familia
        </p>
    </div>
</div>

<%- include("../partials/footer") %>

<script src="/js/home.js"></script>

</body>
</html>